<!doctype html><html lang=en-us prefix="og: https://ogp.me/ns#">
<head><meta charset=utf-8>
<title>Improving Browser Security &#183; segmentation-fault</title>
<meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1">
<meta name=color-scheme content="light dark">
<meta property="og:type" content="website">
<meta property="og:url" content="https://qua3k.github.io/hexavalent/">
<link href=https://qua3k.github.io/LICENSE.txt rel=license>
<meta property="og:title" content="Improving Browser Security &#183; segmentation-fault">
<meta name=description content="Details about Hexavalent">
<meta property="og:description" content="Details about Hexavalent">
<link rel=icon href=favicon.ico>
<link rel=apple-touch-icon sizes=180x180 href=/favicon.svg>
<link rel=mask-icon color=#dd8c79 href=/mask-icon.svg>
<meta property="og:image" content="/ogp.png">
<meta property="og:image:alt" content="a gravatar identicon">
<link href=https://qua3k.github.io/main.min.css rel=stylesheet>
</head>
<body>
<header><h1><a href=/>segmentation-fault</a></h1></header>
<main>
<h1>Improving Browser Security</h1>
<p class=author>duck
(<a href=https://github.com/qua3k>@qua3k</a>)
<p><a href=https://twitter.com/CliffMaceyak/status/1459355718834864130>Following up on my Twitter thread</a> â€“
I am excited to disclose some details of Hexavalent and discuss potential
future plans.</p>
<h2 id=about>About
<a class=anchor href=#about>#</a>
</h2>
<p>Hexavalent is a security and privacy focused web browser based on the open
source Chromium project. It seeks to develop meaningful security improvements
focusing on mitigating classes of bugs rather than individual vulnerabilities
and is currently an unfinished product.</p>
<h2 id=our-work>Our Work
<a class=anchor href=#our-work>#</a>
</h2>
<p>We&rsquo;ve adopted platform-agnostic patches from GrapheneOS&rsquo;s
<a href=https://github.com/GrapheneOS/Vanadium>Vanadium</a> subproject and are planning
to document their functionality in the coming weeks for other developers to
better understand the reasoning behind each change. Some of the hardening is
also being done outside of the browser such as in their hardened bionic libc,
hardened heap allocator, and various toolchain changes which will need to be
evaluated and investigated for inclusion in Hexavalent.</p>
<p>Currently, we&rsquo;re in the process of enabling security features that aren&rsquo;t
enabled upstream due to their needs not being aligned with ours, such as
enabling the &ldquo;HTTPS-only mode&rdquo; that can&rsquo;t be trivially enabled upstream due to
breaking compatibity with legacy sites. We&rsquo;ve also enabled origin isolation due
to it being the only real mitigation against known speculative execution side
channels that can be used to steal data from sites that aren&rsquo;t cross-origin
isolated. It&rsquo;s something upstream is also looking into enabling by default but
won&rsquo;t until <code>document.domain</code> usage drops to a negligible level. The
development of V8&rsquo;s Ubercage is something we&rsquo;re also paying close attention to
and will enable by default once it is more mature.</p>
<p>Some of our current original work involves tightening the Linux sandbox to
prevent dynamic code generation by placing PaX MPROTECT-inspired restrictions in
processes that do not generate dynamic code are currently being tested and may
be upstreamed in the future. We&rsquo;re additionally looking into hardening the heap
allocator based on past work by projects such as
<a href=https://github.com/struct/HardenedPartitionAlloc>HardenedPartitionAlloc</a>. It
is still a work-in-progress but we expect to be able to enable random canaries
in release builds to absorb overflows, zero allocations on free, and more. Some
of the work in
<a href=https://github.com/struct/HardenedPartitionAlloc>HardenedPartitionAlloc</a> such
as the delayed free implementation won&rsquo;t be re-implemented here as there it is
actively being worked on upstream.</p>
<p>Work on redoing the privileged WebUI with a sane Content-Security-Policy won&rsquo;t
be done in Hexavalent either as Microsoft are currently landing patches
upstream using Trusted Types to elimate XSS and any work we do would
effectively be wasted time.</p>
<h2 id=future-work>Future Work
<a class=anchor href=#future-work>#</a>
</h2>
<p>We&rsquo;re going to be looking into reducing the attack surface of the browser by
disabling complex APIs, file formats/parsers, etc, that introduce large amounts
of attack surface and are overly complicated. In addition, we may look into
entirely replacing the heap allocator with one with one focused primarily on
security such as GrapheneOS&rsquo;s
<a href=https://github.com/GrapheneOS/hardened_malloc>hardened_malloc</a> or Chris
Rolf&rsquo;s <a href=https://github.com/struct/isoalloc>isoalloc</a>.</p>
</main>
<footer>
<a href=/posts-list/>a list of all posts</a>
</footer>
</body>
</html>