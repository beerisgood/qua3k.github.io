<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>ungoogled-chromium &#183; duck's pond</title>
<link rel=stylesheet href=/css/style.css>
<link rel=icon href=favicon.ico>
<link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png>
<link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png>
<link href rel=alternate type=application/rss+xml title="duck's pond">
</head>
<body>
<nav class=nav>
<div class=nav-container>
<a href=/>
<h2 class=nav-title>duck's pond</h2>
</a>
<ul>
<li>
<a href=/about/>
<span>About</span>
</a>
</li>
</ul>
</div>
</nav>
<main>
<div class=post>
<div class=post-info>
<span>Written by</span>
duck
<br>
<span>on&nbsp;</span><time datetime="2021-05-29 00:00:00 +0000 UTC">May 29, 2021</time>
</div>
<h1 class=post-title>ungoogled-chromium</h1>
<div class=post-line></div>
<p>As one of the most used applications in the system, it is ideal to have a secure browser. Browsers have large attack surface due to a combination of their complexity, handling of untrusted input, and use of unsafe languages. Even while browser makers continually work make their browsers more secure, most browsers have poor privacy out of the box. <a href=https://github.com/Eloston/ungoogled-chromium>ungoogled-chromium</a> is an often recommended browser because of its approach of stripping out Google web services from Chromium.</p>
<p>I have a couple of concerns with this recommendation, namely:</p>
<ul>
<li>ungoogled-chromium lags behind upstream Chrome for days <a href=https://github.com/Eloston/ungoogled-chromium/releases>every release</a>.</li>
<li>The team does not ship official binaries; <a href=https://github.com/Eloston/ungoogled-chromium#downloads>third parties contribute prebuilt binaries</a>, so there is no central party to trust.</li>
<li>Additionally, the maintainers of the packages tend to <a href="https://aur.archlinux.org/cgit/aur.git/tree/PKGBUILD?h=ungoogled-chromium#n143">weaken exploit mitigations such as Control-Flow Integrity by opting to use system libraries</a> or <a href=https://github.com/ungoogled-software/ungoogled-chromium-fedora>build with unsupported toolchains</a>.</li>
<li>Component updates are disabled, instead opting to ship components each browser update. Components were originally unbundled from browser updates so that they could be updated faster.</li>
<li>Links to documentation and troubleshooting are broken by their patches.</li>
</ul>
<p>Security issues aside, they must be doing unique and great work in privacy, right?</p>
<p>Not necessarily. Most of the functionality of the patches are either in the best case minimally beneficial or can be reproduced with either a setting, a flag, or a switch, and using a browser specifically for these patches should not merit the tradeoff in security.</p>
<p>This blog post aims to detail the patches in the order they apply in, their functions, and how they can be reproduced in Chrome.</p>
<h3 id=0001-fix-building-without-safebrowsingpatch-unrarpatch-safe_browsing-disable-incident-reportingpatch-safe_browsing-disable-reporting-of-safebrowsing-overpatch-remove-unused-preferences-fieldspatch>0001-fix-building-without-safebrowsing.patch, unrar.patch, safe_browsing-disable-incident-reporting.patch, safe_browsing-disable-reporting-of-safebrowsing-over.patch, remove-unused-preferences-fields.patch</h3>
<p>These patches disable safe browsing. Related prefs are removed in <code>remove-unused-preferences-fields</code>.</p>
<ul>
<li>Safe browsing can be turned off in <code>chrome://settings</code>.</li>
</ul>
<h3 id=0003-disable-autofill-download-managerpatch>0003-disable-autofill-download-manager.patch</h3>
<p>This patch disables form Autofill data transmission to Google.</p>
<ul>
<li>Autofill can be turned off in <code>chrome://settings</code>.</li>
</ul>
<h3 id=0005-disable-default-extensionspatch>0005-disable-default-extensions.patch</h3>
<p>This patch disables</p>
<ul>
<li>Google Wallet</li>
<li>Google Feedback</li>
<li>Google Web Store</li>
<li>Google Hangouts</li>
<li>Google Branding</li>
</ul>
<h3 id=0007-disable-web-resource-servicepatch>0007-disable-web-resource-service.patch</h3>
<p>This patch disables Chrome&rsquo;s WebResourceService, which periodically fetches data from a Google server to dynamically configure the browser. It is(was) used by PluginsResourceService to download security updates for plugins, the last of which was Flash. It is used by PromoResourceService to dynamically change the appearance of the new tab page, although the only platform that still runs promos is iOS.</p>
<h3 id=0009-disable-google-ipv6-probespatch>0009-disable-google-ipv6-probes.patch</h3>
<p>This patch uses RIPE NCC servers instead of Google servers for IPv6 probes.</p>
<h3 id=0015-disable-update-pingspatch>0015-disable-update-pings.patch</h3>
<p>This patch disables pings to clients2.google.com/ for component updates.</p>
<ul>
<li>Component updates can be disabled with switch <code>--disable-component-update</code>.</li>
</ul>
<h3 id=0017-disable-new-avatar-menupatch>0017-disable-new-avatar-menu.patch</h3>
<p>This cosmetic patch disables the new avatar menu.</p>
<h3 id=0021-disable-rlzpatch>0021-disable-rlz.patch</h3>
<p>This patch disables RLZ, a promotional tag used to measure searches and Chrome usage. This non-unique tag sent is sent with searches made on Google, telemetry, and crash reports.</p>
<ul>
<li>RLZ can be disabled by defining <code>"rlz_disabled":true</code> in the preferences file.</li>
</ul>
<h3 id=disable-crash-reporterpatch>disable-crash-reporter.patch</h3>
<p>This patch disables the uploading of crash reports to Google. Chromium does not report crashes.</p>
<ul>
<li>Disable the crash reporter with switch <code>--disable-crash-reporter</code>.</li>
</ul>
<h3 id=disable-google-host-detectionpatch>disable-google-host-detection.patch</h3>
<p>This patch disables specific features and restrictions applied to Google domains.</p>
<h3 id=replace-google-search-engine-with-nosearchpatch>replace-google-search-engine-with-nosearch.patch</h3>
<p>This patch replaces Google with &ldquo;No Search&rdquo; (disabling search from omnibox).</p>
<ul>
<li>Use another search engine.</li>
</ul>
<h3 id=disable-signinpatch-fix-building-without-one-click-signinpatch-disable-gaiapatch>disable-signin.patch, fix-building-without-one-click-signin.patch, disable-gaia.patch</h3>
<p>This patch disables browser management of sign-in of Google Accounts. Requires API keys found only in Chrome.</p>
<ul>
<li>Disabled with switches <code>--disable-gaia-services</code>, <code>--disable-sync</code>, <code>--allow-browser-signin=false</code></li>
</ul>
<h3 id=toggle-translation-via-switchpatch>toggle-translation-via-switch.patch</h3>
<p>This patch disables translation and removes the &ldquo;Translate to&rdquo; context menu when <code>--translate-script-url</code> is not set.</p>
<ul>
<li>Define a non-existent <code>--translate-script-url</code>.</li>
</ul>
<h3 id=all-add-trk-prefixes-to-possibly-evil-connectionpatch-disable-untraceable-urlspatch-block-trk-and-subdomainspatch-disable-webstore-urlspatch-fix-learn-doubleclick-hstspatch-block-requestspatch>all-add-trk-prefixes-to-possibly-evil-connection.patch, disable-untraceable-urls.patch, block-trk-and-subdomains.patch, disable-webstore-urls.patch, fix-learn-doubleclick-hsts.patch, block-requests.patch</h3>
<p>These patches disable all connections hard-coded into the browser using domain substitution. Many of these connections are only made on user interaction and not transparently made in the background.</p>
<p>Connections patched out include</p>
<ul>
<li>AppID faucets used in U2F,</li>
<li>Browser customization,</li>
<li>Chrome Web Store,</li>
<li>Component and Extension endpoints,</li>
<li>Documentation: e.g. the &ldquo;learn more&rdquo; page in incognito mode.,</li>
<li>Extensions functionality,</li>
<li>Login endpoints,</li>
<li>Log and crash report endpoints,</li>
<li>Et cetera.</li>
</ul>
<details>
<summary><a href=https://github.com/lynn-stephenson>@lynn-stephenson</a> â€” you can even change the URLs of "Google URLs" with some switches</summary>
<p><code>--google-apis-url</code>
<p><code>--google-base-url</code>
<p><code>--google-url</code>
<p><code>--autofill-assistant-url</code>
<p><code>--autofill-server-url</code>
<p><code>--cloud-print-url</code>
<p><code>--connectivity-check-url</code>
<p><code>--crash-server-url</code>
<p><code>--cryptauth-http-host</code>
<p><code>--cryptauth-v2-devicesync-http-host</code>
<p><code>--cryptauth-v2-enrollment-http-host</code>
<p><code>--data-reduction-proxy-config-url</code>
<p><code>--data-reduction-proxy-pingback-url</code>
<p><code>--data-reduction-proxy-secure-proxy-check-url</code>
<p><code>--device-management-url</code>
<p><code>--disable-sync</code>
<p><code>--disable-sync-types</code>
</details>
<h3 id=disable-profile-avatar-downloadingpatch>disable-profile-avatar-downloading.patch</h3>
<p>This patch disables the downloading of profile avatars from Google.</p>
<h3 id=disable-gcmpatch>disable-gcm.patch</h3>
<p>Disables the Google Cloud Messaging component of the <code>chrome.gcm</code> API that extensions can use to send messages through Firebase Cloud Messaging.</p>
<h3 id=disable-domain-reliabilitypatch>disable-domain-reliability.patch</h3>
<p>The domain reliability monitor sends info to Google whenever an error occurs while visiting a Google domain.</p>
<ul>
<li>Disable domain reliability with switch <code>--disable-domain-reliability</code>.</li>
</ul>
<h3 id=disable-fonts-googleapis-referencespatch>disable-fonts-googleapis-references.patch</h3>
<p>This patch disables references to fonts.googleapis.com/ hardcoded in the browser.</p>
<h3 id=disable-webrtc-log-uploaderpatch>disable-webrtc-log-uploader.patch</h3>
<p>This patch disables the uploading of WebRTC logs for the Hangouts extension.</p>
<ul>
<li>Disable reporting additional diagnostics in Hangouts settings.</li>
</ul>
<h3 id=use-local-devtools-filespatch>use-local-devtools-files.patch</h3>
<p>This patch always uses local DevTools files instead of remote files from Google.</p>
<h3 id=disable-network-time-trackerpatch>disable-network-time-tracker.patch</h3>
<p>This patch disables connections to Google to check if the system time is correct when a website certificate date seems incorrect.</p>
<ul>
<li>Disable the network time tracker with switch <code>--disable-features=NetworkTimeServiceQuerying</code></li>
</ul>
<h3 id=disable-mei-preloadpatch>disable-mei-preload.patch</h3>
<p>This patch disables downloading of a list of sites with a high Media Engagement Index, used to determine whether or not a site autoplays.</p>
<ul>
<li>Disable MEI preloading with switch <code>--disable-features=PreloadMediaEngagementData, MediaEngagementBypassAutoplayPolicies</code></li>
</ul>
<h3 id=fix-building-without-enabling-reportingpatch>fix-building-without-enabling-reporting.patch</h3>
<p>This patch disables reporting COEP/COOP violations.</p>
<h3 id=disable-fetching-field-trialspatch>disable-fetching-field-trials.patch</h3>
<p>This patch disables the downloading of field trials (Googleâ€™s A/B testing).</p>
<ul>
<li>Field trials can be disabled with switch <code>--disable-field-trial-config</code>.</li>
</ul>
<p>With the relative ease that these settings can be changed, there are few reasons to use <code>ungoogled-chromium</code> as a main browser when Chrome can be configured similarly.</p>
<p>If you do decide to use <code>ungoogled-chromium</code>, against the advice of this article, please properly build it yourself.</p>
</div>
<div class=pagination>
<a href=/first/ class="left arrow">&#8592;</a>
<a href=/security/email/ class="right arrow">&#8594;</a>
<a href=# class=top>Top</a>
</div>
</main>
<footer>
<span>
&copy; <time datetime="2021-08-30 01:02:35.317798629 +0000 UTC m=+0.042932399">2021</time> duck. Made with <a href=https://gohugo.io>Hugo</a> using the <a href=https://github.com/EmielH/tale-hugo/>Tale</a> theme.
</span>
</footer>
</body>
</html>